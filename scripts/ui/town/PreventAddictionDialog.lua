-- Command line was: E:\github\dhgametool\scripts\ui\town\PreventAddictionDialog.lua 

local ui = {}
require("common.const")
require("common.func")
local view = require("common.view")
local img = require("res.img")
local lbl = require("res.lbl")
local json = require("res.json")
local i18n = require("res.i18n")
local audio = require("res.audio")
local data = require("data.preventaddiction")
local BG_WIDTH = 436
local BG_HEIGHT = 300
ui.create = function(l_1_0)
  local layer = CCLayer:create()
  local darkBg = CCLayerColor:create(ccc4(0, 0, 0, POPUP_DARK_OPACITY))
  layer:addChild(darkBg)
  local bg = img.createLogin9Sprite(img.login.dialog)
  bg:setPreferredSize(CCSize(BG_WIDTH, BG_HEIGHT))
  bg:setScale(view.minScale)
  bg:setPosition(scalep(480, 314))
  layer:addChild(bg)
  local closeBtn0 = img.createLoginSprite(img.login.button_close)
  local closeBtn = SpineMenuItem:create(json.ui.button, closeBtn0)
  closeBtn:setPosition(BG_WIDTH - 30, BG_HEIGHT - 30)
  local closeMenu = CCMenu:createWithItem(closeBtn)
  closeMenu:setPosition(0, 0)
  bg:addChild(closeMenu)
  closeBtn:registerScriptTapHandler(function()
    audio.play(audio.button)
    layer.onAndroidBack()
   end)
  local adult = data.getAdult()
  local totalTime = (data.getTotalTime())
  local des = nil
  des = "\230\156\170\229\174\158\229\144\141\231\142\169\229\174\182\229\143\151\229\136\176\233\152\178\230\178\137\232\191\183\231\179\187\231\187\159\231\154\132\233\153\144\229\136\182\239\188\140\230\184\184\230\136\143\230\148\182\231\155\138\229\176\134\232\161\176\229\135\14350%\227\128\130"
  if adult == 0 then
    des = "\230\156\170\229\174\158\229\144\141\231\142\169\229\174\182\229\143\151\229\136\176\233\152\178\230\178\137\232\191\183\231\179\187\231\187\159\231\154\132\233\153\144\229\136\182\239\188\140\230\184\184\230\136\143\230\148\182\231\155\138\229\176\134\232\161\176\229\135\14350%\239\188\140\232\175\183\230\130\168\229\137\141\229\190\128\232\191\155\232\161\140\229\174\158\229\144\141\232\174\164\232\175\129\227\128\130"
    if data.FIVE_HOUR <= totalTime then
      des = "\230\130\168\228\187\138\230\151\165\231\180\175\231\167\175\230\184\184\230\136\143\230\151\182\233\149\191\229\183\178\232\190\190\229\136\1765\229\176\143\230\151\182\239\188\140\230\156\170\229\174\158\229\144\141\231\142\169\229\174\182\229\143\151\229\136\176\233\152\178\230\178\137\232\191\183\231\179\187\231\187\159\231\154\132\233\153\144\229\136\182\239\188\140\229\176\134\230\151\160\230\179\149\232\142\183\229\190\151\230\184\184\230\136\143\230\148\182\231\155\138\239\188\140\232\175\183\230\130\168\229\137\141\229\190\128\232\191\155\232\161\140\229\174\158\229\144\141\232\174\164\232\175\129\227\128\130"
    else
      if data.THREE_HOUR <= totalTime then
        des = "\230\130\168\228\187\138\230\151\165\231\180\175\231\167\175\230\184\184\230\136\143\230\151\182\233\149\191\229\183\178\232\190\190\229\136\1763\229\176\143\230\151\182\239\188\140\230\156\170\229\174\158\229\144\141\231\142\169\229\174\182\229\143\151\229\136\176\233\152\178\230\178\137\232\191\183\231\179\187\231\187\159\231\154\132\233\153\144\229\136\182\239\188\140\230\184\184\230\136\143\230\148\182\231\155\138\229\176\134\232\161\176\229\135\14350%\239\188\140\232\175\183\230\130\168\229\137\141\229\190\128\232\191\155\232\161\140\229\174\158\229\144\141\232\174\164\232\175\129\227\128\130"
      else
        des = "\230\156\170\229\174\158\229\144\141\231\142\169\229\174\182\229\143\151\229\136\176\233\152\178\230\178\137\232\191\183\231\179\187\231\187\159\231\154\132\233\153\144\229\136\182\239\188\140\230\184\184\230\136\143\230\148\182\231\155\138\229\176\134\232\161\176\229\135\14350%\239\188\140\232\175\183\230\130\168\229\137\141\229\190\128\232\191\155\232\161\140\229\174\158\229\144\141\232\174\164\232\175\129\227\128\130"
      end
    end
    local okBtn0 = img.createLogin9Sprite(img.login.button_9_small_gold)
    okBtn0:setPreferredSize(CCSize(160, 50))
    local okBtn = SpineMenuItem:create(json.ui.button, okBtn0)
    local okSize = okBtn:getContentSize()
    okBtn:setPosition(BG_WIDTH / 2, 76)
    local okText = "\229\137\141\229\190\128\229\174\158\229\144\141\232\174\164\232\175\129"
    local okLabel = lbl.createFontTTF(16, okText, ccc3(115, 59, 5))
    okLabel:setPosition(okSize.width / 2, okSize.height / 2)
    okBtn0:addChild(okLabel)
    local okMenu = CCMenu:createWithItem(okBtn)
    okMenu:setPosition(0, 0)
    bg:addChild(okMenu)
    okBtn:registerScriptTapHandler(function()
      audio.play(audio.button)
      layer:removeFromParent()
      parentLayer:addChild(require("ui.town.IdCardVerifyDialog").create(), 1000000)
      end)
  elseif adult == 2 then
    des = "\231\148\177\228\186\142\230\130\168\230\152\175\230\156\170\230\136\144\229\185\180\231\142\169\229\174\182\239\188\140\229\143\151\229\136\176\233\152\178\230\178\137\232\191\183\231\179\187\231\187\159\231\154\132\233\153\144\229\136\182\239\188\140\230\184\184\230\136\143\230\148\182\231\155\138\232\161\176\229\135\14350%\239\188\140\232\175\183\230\179\168\230\132\143\229\138\179\233\128\184\231\187\147\229\144\136\227\128\130"
    if data.FIVE_HOUR <= totalTime then
      des = "\230\130\168\228\187\138\230\151\165\231\180\175\231\167\175\230\184\184\230\136\143\230\151\182\233\149\191\229\183\178\232\190\190\229\136\1765\229\176\143\230\151\182\239\188\140\231\148\177\228\186\142\230\130\168\230\152\175\230\156\170\230\136\144\229\185\180\231\142\169\229\174\182\239\188\140\229\143\151\229\136\176\233\152\178\230\178\137\232\191\183\231\179\187\231\187\159\231\154\132\233\153\144\229\136\182\239\188\140\229\176\134\230\151\160\230\179\149\232\142\183\229\190\151\230\184\184\230\136\143\230\148\182\231\155\138\239\188\140\232\175\183\230\179\168\230\132\143\229\138\179\233\128\184\231\187\147\229\144\136\227\128\130"
    else
      if data.THREE_HOUR <= totalTime then
        des = "\230\130\168\228\187\138\230\151\165\231\180\175\231\167\175\230\184\184\230\136\143\230\151\182\233\149\191\229\183\178\232\190\190\229\136\1763\229\176\143\230\151\182\239\188\140\231\148\177\228\186\142\230\130\168\230\152\175\230\156\170\230\136\144\229\185\180\231\142\169\229\174\182\239\188\140\229\143\151\229\136\176\233\152\178\230\178\137\232\191\183\231\179\187\231\187\159\231\154\132\233\153\144\229\136\182\239\188\140\230\184\184\230\136\143\230\148\182\231\155\138\232\161\176\229\135\14350%\239\188\140\232\175\183\230\179\168\230\132\143\229\138\179\233\128\184\231\187\147\229\144\136\227\128\130"
      else
        des = "\231\148\177\228\186\142\230\130\168\230\152\175\230\156\170\230\136\144\229\185\180\231\142\169\229\174\182\239\188\140\229\143\151\229\136\176\233\152\178\230\178\137\232\191\183\231\179\187\231\187\159\231\154\132\233\153\144\229\136\182\239\188\140\230\184\184\230\136\143\230\148\182\231\155\138\232\161\176\229\135\14350%\239\188\140\232\175\183\230\179\168\230\132\143\229\138\179\233\128\184\231\187\147\229\144\136\227\128\130"
      end
    elseif adult == 1 then
      des = "\228\189\160\229\183\178\231\187\143\229\174\158\229\144\141\232\174\164\232\175\129\227\128\130"
    end
  end
  local desParams = {kind = "ttf", size = 18, text = des, color = ccc3(113, 63, 22), width = 369, align = kCCTextAlignmentLeft}
  local desLabel = lbl.create(desParams)
  desLabel:setAnchorPoint(ccp(0.5, 1))
  desLabel:setPosition(BG_WIDTH / 2, 202)
  bg:addChild(desLabel)
  if data.FIVE_HOUR <= totalTime then
    data.setDialogShowTime(data.MAX_HOUR)
  else
    if data.THREE_HOUR <= totalTime then
      data.setDialogShowTime(data.FIVE_HOUR)
    end
  end
  addBackEvent(layer)
  layer.onAndroidBack = function()
    layer:removeFromParent()
   end
  layer:registerScriptHandler(function(l_4_0)
    if l_4_0 == "enter" then
      layer.notifyParentLock()
    elseif l_4_0 == "exit" then
      layer.notifyParentUnlock()
    end
   end)
  layer:setTouchEnabled(true)
  layer:setTouchSwallowEnabled(true)
  return layer
end

return ui

